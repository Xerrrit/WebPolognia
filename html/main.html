<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Main</title>
        <link rel="stylesheet" href="../css/styles.css">
    </head>
    <body>
        <div id="header-placeholder"></div>
        
        
        <main>
            <h1>Items:</h1>
            <div id="products-container"></div>
        </main>

        
        <div id="footer-placeholder"></div>
        <script>
            fetch('header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header-placeholder').innerHTML = data;
                });
            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer-placeholder').innerHTML = data;
                });


            // Appel API
            fetch("http://localhost:4000/products")
                .then(response => response.json())
                .then(products => {
                    const container = document.getElementById("products-container");

                    products.forEach(product => {
                        const item = document.createElement("div");
                        item.innerHTML = `
                            <div class="window_product">
                            <h2>
                                    <a href="product.html?id=${product.id}">${product.name}</a>
                                </h2>
                            <img src="${product.image}" width="150">
                            <p>Price: ${product.price}â‚¬</p>
                            <p>${product.description}</p>
                            <p>Stock: ${product.stock}</p>
                            <hr>
                            </div>
                        `;
                        container.appendChild(item);
                    });
                })
                .catch(error => console.error("ERROR:", error));
        </script>
    </body>
    
</html>